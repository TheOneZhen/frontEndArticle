# 设计模式篇
## 为什么要学习设计模式
## 设计模式为编程带来的思考
- 如果检查项目中存在的设计缺陷
  - 检测原理
  - 检测工具
- 关于架构
  - 由最开始专注于业务的功能点设计，最后是反馈于最初架构
  - 还是在建构之初，就应该既定功能点设计

## else concept base
- 开放封闭原则（OCP，Open Closed Principle）：开放拓展，封闭修改

## 策略模式（Strategy）
对于复杂策略A，按照专项场景拆分为不同的策略方法（策略类）

## 发布-订阅模式（Publish-Subscribe）
**发布-订阅**是一种消息范式，**发布者**不会将消息发布给特定**订阅者**，而是广播出去。
```js
class EventEmit {
  _events = new Map()
  
  on (event, callback) {
    const set = this._events.get(event) || new Set();
    set.add(callback);
    this._events.set(event, set);
  }

  off (event, callback) {
    const set = this._events.get(event);
    set && set.has(callback) && set.delete(callback);
  }

  once (event, callback) {
    const fn = (...args) => {
      this.off(event, fn);
      callback(...args);
    }
    this.on(event, fn);
  }

  emit (event, ...rest) {
    const set = this._events.get(event);
    if (set && set.size) {
      set.forEach(callback => callback(...rest));
    }
  }
}
```
## 装饰器模式（Decorator）
装饰原有抽象类以满足新的业务，有点像面向对象的多态。